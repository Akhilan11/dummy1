<div *ngIf="loading">Loading products...</div>
<div *ngIf="!loading && products.length === 0">No products available.</div>
<div *ngIf="!loading && products.length > 0">
  <table>
    <thead>
      <tr>
        <th>Image</th>
        <th>Product Name</th>
        <th>Price</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of products">
        <!-- Product Image -->
        <td>
          <img
            [src]="product.imageUrl || 'https://cdn-media.powerlook.in/catalog/product/3/1/31227221.jpg?aio=w-640'"
            alt="{{ product.name }}" 
            style="width: 100px; height: auto; object-fit: cover;"
          />
        </td>

        <!-- Inline Edit Mode -->
        <ng-container *ngIf="isEditing && currentEditProduct && currentEditProduct._id === product._id; else viewMode">
          <td>
            <input [(ngModel)]="currentEditProduct.name" placeholder="Product Name" />
          </td>
          <td>
            <input [(ngModel)]="currentEditProduct.price" placeholder="Price" />
          </td>
          <td>
            <button (click)="saveProduct()">Save</button>
            <button (click)="cancelEditing()">Cancel</button>
          </td>
        </ng-container>

        <!-- View Mode -->
        <ng-template #viewMode>
          <td>{{ product.name }}</td>
          <td>â‚¹{{ product.price }}</td>
          <td>
            <button (click)="startEditing(product)">Edit</button>
            <button (click)="deleteProduct(product._id)">Delete</button>
            <button (click)="viewProduct(product._id)">view product</button>
          </td>
        </ng-template>
      </tr>
    </tbody>
  </table>
</div>
